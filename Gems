package me.Trand.gems.Listeners;

import java.util.HashSet;
import java.util.Set;

import org.bukkit.ChatColor;
import org.bukkit.Material;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.Action;
import org.bukkit.event.entity.EntityDamageByEntityEvent;
import org.bukkit.event.player.PlayerInteractEvent;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.meta.ItemMeta;

public class Rightclick implements Listener {
	Set<Integer> someSet = new HashSet<Integer>();

	@EventHandler
	public void druginjection(PlayerInteractEvent event) {
		Player player = event.getPlayer();
		if (player.getInventory().getItemInHand().getType() == Material.EMERALD
				&& player.getItemInHand().getItemMeta().getDisplayName() == "§c§lCRITICAL") {

			if (event.getAction() == Action.RIGHT_CLICK_AIR || event.getAction() == Action.RIGHT_CLICK_BLOCK) {

				player.sendMessage(ChatColor.BOLD + "Hmm that feels good!");
				ItemStack item = new ItemStack(Material.EMERALD, 1);
				ItemMeta meta = item.getItemMeta();
				meta.setDisplayName("§c§lCRITICAL");
				item.setItemMeta(meta);
				player.getInventory().removeItem(item);
				player.updateInventory();
				player.sendMessage("§a * Adicionado +1 em seu nível de §c§lCRITICAL§a!.");
				someSet.add(+ 1);
				for (Integer number : someSet) {
					if (number > 0) {
						player.sendMessage("§a * Nível atual de §c§lCRITICAL§a: §f" + number);
						player.sendMessage("§a Dano extra: §c" + number * 5 / 100);
					} else {
						player.sendMessage("§c * 0");
					}
				}

			}

		}

	}

	@EventHandler
	public void entityDamage(EntityDamageByEntityEvent e) {
		if ((e.getDamager() instanceof Player)) {
			Player p = (Player) e.getDamager();
			for (Integer number : someSet) {
				if (number > 0) {
					e.setDamage(p.getLastDamage() + number * 5 / 100);
				}
			}
		}
	}

}
